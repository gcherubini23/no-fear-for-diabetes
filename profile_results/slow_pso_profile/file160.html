<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><link rel="stylesheet" href="file:////Applications/MATLAB_R2023b.app/toolbox/matlab/codetools/matlab-report-styles.css" type="text/css" /><title>Profile Summary</title></head><title>Function details for non_linear_model&gt;non_linear_model.preprocess</title><link rel="stylesheet" href="file:////Applications/MATLAB_R2023b.app/toolbox/matlab/codetools/matlab-report-styles.css" type="text/css" /></head><body bgcolor="#F8F8F8"><strong>This is a static copy of a profile report</strong><p><a href="file0.html">Home</a><p><span style="font-size:14pt; background:#FFE4B0">non_linear_model&gt;non_linear_model.preprocess (Calls: 11235900, Time: 78.902 s)</span><br/><i>Generated 28-Mar-2024 11:23:45 using performance time.</i><br/>class method in file /Users/giovannicherubini/Desktop/Thesis/Code/no-fear-for-diabetes/MATLAB/model/t1dm/non_linear_model.m<br/>Copy to new window for comparing multiple runs<div class="grayline"/><div class="grayline"/><strong>Parents</strong> (calling functions)<br/><p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Function Name</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Function Type</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Calls</td></tr><tr><td class="td-linebottomrt"><a href="file159.html">utils&gt;utils.euler_solve</a></td><td class="td-linebottomrt">class method</td><td class="td-linebottomrt">11235900</td></tr></table><div class="grayline"/><strong>Lines where the most time was spent</strong><br/> <p><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Line Number</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Code</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Calls</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Total Time</td><td class="td-linebottomrt" style="background-color:#F0F0F0">% Time</td><td class="td-linebottomrt" style="background-color:#F0F0F0">Time Plot</td></tr><tr><td class="td-linebottomrt"><a href="#Line91">91</a></td><td class="td-linebottomrt"><pre>y_k = struct('insulin_to_infus...</pre></td><td class="td-linebottomrt">11232000</td><td class="td-linebottomrt">33.097 s</td><td class="td-linebottomrt" class="td-linebottomrt">41.9%</td><td class="td-linebottomrt"><img src="data:image/gif;base64, R0lGODlhAQABAPcAAP8A//oA//UA//AA/+sA/+YA/+EA/9wA/9cA/9IA/80A/8gA/8MA/74A/7kA/7QA/68A/6oA/6UA/6AA/5sA/5YA/5EA/4wA/4cA/4IA/30A/3gA/3MA/24A/2kA/2QA/18A/1oA/1UA/1AA/0sA/0YA/0EA/zwA/zcA/zIA/y0A/ygA/yMA/x4A/xkA/xQA/w8A/woA/wUA/wAA/wAF/wAK/wAP/wAU/wAZ/wAe/wAj/wAo/wAt/wAy/wA3/wA8/wBB/wBG/wBL/wBQ/wBV/wBa/wBf/wBk/wBp/wBu/wBz/wB4/wB9/wCC/wCH/wCM/wCR/wCW/wCb/wCg/wCl/wCq/wCv/wC0/wC5/wC+/wDD/wDI/wDN/wDS/wDX/wDc/wDh/wDm/wDr/wDw/wD1/wD7/wD//wD/+gD/9QD/8AD/6wD/5gD/4QD/3AD/1wD/0gD/zQD/yAD/wwD/vgD/uQD/tAD/rwD/qgD/pQD/oAD/mwD/lgD/kQD/jAD/hwD/ggD/fQD/eAD/cwD/bgD/aQD/ZAD/XwD/WgD/VQD/UAD/SwD/RgD/QQD/PAD/NwD/MgD/LQD/KAD/IwD/HgD/GQD/FAD/DwD/CgD/BQD/AAX/AAr/AA//ABT/ABn/AB7/ACP/ACj/AC3/ADL/ADf/ADz/AEH/AEb/AEv/AFD/AFX/AFr/AF//AGT/AGn/AG7/AHP/AHj/AH3/AIL/AIf/AIz/AJH/AJb/AJv/AKD/AKX/AKr/AK//ALT/ALn/AL7/AMP/AMj/AM3/ANL/ANf/ANz/AOH/AOb/AOv/APD/APX/APr/AP//AP/6AP/1AP/wAP/rAP/mAP/hAP/cAP/XAP/SAP/NAP/IAP/DAP++AP+5AP+0AP+vAP+qAP+lAP+gAP+bAP+WAP+RAP+MAP+HAP+CAP99AP94AP9zAP9uAP9pAP9kAP9fAP9aAP9VAP9QAP9LAP9GAP9BAP88AP83AP8yAP8tAP8oAP8jAP8eAP8ZAP8UAP8PAP8KAP8FAP8AACwAAAAAAQABAAAIBABnBAQAOw==" width=42 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line90">90</a></td><td class="td-linebottomrt"><pre>v_k = struct('CHO_consumed_rat...</pre></td><td class="td-linebottomrt">11232000</td><td class="td-linebottomrt">29.330 s</td><td class="td-linebottomrt" class="td-linebottomrt">37.2%</td><td class="td-linebottomrt"><img src="data:image/gif;base64, R0lGODlhAQABAPcAAP8A//oA//UA//AA/+sA/+YA/+EA/9wA/9cA/9IA/80A/8gA/8MA/74A/7kA/7QA/68A/6oA/6UA/6AA/5sA/5YA/5EA/4wA/4cA/4IA/30A/3gA/3MA/24A/2kA/2QA/18A/1oA/1UA/1AA/0sA/0YA/0EA/zwA/zcA/zIA/y0A/ygA/yMA/x4A/xkA/xQA/w8A/woA/wUA/wAA/wAF/wAK/wAP/wAU/wAZ/wAe/wAj/wAo/wAt/wAy/wA3/wA8/wBB/wBG/wBL/wBQ/wBV/wBa/wBf/wBk/wBp/wBu/wBz/wB4/wB9/wCC/wCH/wCM/wCR/wCW/wCb/wCg/wCl/wCq/wCv/wC0/wC5/wC+/wDD/wDI/wDN/wDS/wDX/wDc/wDh/wDm/wDr/wDw/wD1/wD7/wD//wD/+gD/9QD/8AD/6wD/5gD/4QD/3AD/1wD/0gD/zQD/yAD/wwD/vgD/uQD/tAD/rwD/qgD/pQD/oAD/mwD/lgD/kQD/jAD/hwD/ggD/fQD/eAD/cwD/bgD/aQD/ZAD/XwD/WgD/VQD/UAD/SwD/RgD/QQD/PAD/NwD/MgD/LQD/KAD/IwD/HgD/GQD/FAD/DwD/CgD/BQD/AAX/AAr/AA//ABT/ABn/AB7/ACP/ACj/AC3/ADL/ADf/ADz/AEH/AEb/AEv/AFD/AFX/AFr/AF//AGT/AGn/AG7/AHP/AHj/AH3/AIL/AIf/AIz/AJH/AJb/AJv/AKD/AKX/AKr/AK//ALT/ALn/AL7/AMP/AMj/AM3/ANL/ANf/ANz/AOH/AOb/AOv/APD/APX/APr/AP//AP/6AP/1AP/wAP/rAP/mAP/hAP/cAP/XAP/SAP/NAP/IAP/DAP++AP+5AP+0AP+vAP+qAP+lAP+gAP+bAP+WAP+RAP+MAP+HAP+CAP99AP94AP9zAP9uAP9pAP9kAP9fAP9aAP9VAP9QAP9LAP9GAP9BAP88AP83AP8yAP8tAP8oAP8jAP8eAP8ZAP8UAP8PAP8KAP8FAP8AACwAAAAAAQABAAAIBABnBAQAOw==" width=37 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line60">60</a></td><td class="td-linebottomrt"><pre>if (y_kminus1.CHO_to_eat / dt ...</pre></td><td class="td-linebottomrt">11232000</td><td class="td-linebottomrt">1.106 s</td><td class="td-linebottomrt" class="td-linebottomrt">1.4%</td><td class="td-linebottomrt"><img src="data:image/gif;base64, R0lGODlhAQABAPcAAP8A//oA//UA//AA/+sA/+YA/+EA/9wA/9cA/9IA/80A/8gA/8MA/74A/7kA/7QA/68A/6oA/6UA/6AA/5sA/5YA/5EA/4wA/4cA/4IA/30A/3gA/3MA/24A/2kA/2QA/18A/1oA/1UA/1AA/0sA/0YA/0EA/zwA/zcA/zIA/y0A/ygA/yMA/x4A/xkA/xQA/w8A/woA/wUA/wAA/wAF/wAK/wAP/wAU/wAZ/wAe/wAj/wAo/wAt/wAy/wA3/wA8/wBB/wBG/wBL/wBQ/wBV/wBa/wBf/wBk/wBp/wBu/wBz/wB4/wB9/wCC/wCH/wCM/wCR/wCW/wCb/wCg/wCl/wCq/wCv/wC0/wC5/wC+/wDD/wDI/wDN/wDS/wDX/wDc/wDh/wDm/wDr/wDw/wD1/wD7/wD//wD/+gD/9QD/8AD/6wD/5gD/4QD/3AD/1wD/0gD/zQD/yAD/wwD/vgD/uQD/tAD/rwD/qgD/pQD/oAD/mwD/lgD/kQD/jAD/hwD/ggD/fQD/eAD/cwD/bgD/aQD/ZAD/XwD/WgD/VQD/UAD/SwD/RgD/QQD/PAD/NwD/MgD/LQD/KAD/IwD/HgD/GQD/FAD/DwD/CgD/BQD/AAX/AAr/AA//ABT/ABn/AB7/ACP/ACj/AC3/ADL/ADf/ADz/AEH/AEb/AEv/AFD/AFX/AFr/AF//AGT/AGn/AG7/AHP/AHj/AH3/AIL/AIf/AIz/AJH/AJb/AJv/AKD/AKX/AKr/AK//ALT/ALn/AL7/AMP/AMj/AM3/ANL/ANf/ANz/AOH/AOb/AOv/APD/APX/APr/AP//AP/6AP/1AP/wAP/rAP/mAP/hAP/cAP/XAP/SAP/NAP/IAP/DAP++AP+5AP+0AP+vAP+qAP+lAP+gAP+bAP+WAP+RAP+MAP+HAP+CAP99AP94AP9zAP9uAP9pAP9kAP9fAP9aAP9VAP9QAP9LAP9GAP9BAP88AP83AP8yAP8tAP8oAP8jAP8eAP8ZAP8UAP8PAP8KAP8FAP8AACwAAAAAAQABAAAIBABnBAQAOw==" width=1 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line39">39</a></td><td class="td-linebottomrt"><pre>if y_kminus1.insulin_to_infuse...</pre></td><td class="td-linebottomrt">11232000</td><td class="td-linebottomrt">0.910 s</td><td class="td-linebottomrt" class="td-linebottomrt">1.2%</td><td class="td-linebottomrt"><img src="data:image/gif;base64, R0lGODlhAQABAPcAAP8A//oA//UA//AA/+sA/+YA/+EA/9wA/9cA/9IA/80A/8gA/8MA/74A/7kA/7QA/68A/6oA/6UA/6AA/5sA/5YA/5EA/4wA/4cA/4IA/30A/3gA/3MA/24A/2kA/2QA/18A/1oA/1UA/1AA/0sA/0YA/0EA/zwA/zcA/zIA/y0A/ygA/yMA/x4A/xkA/xQA/w8A/woA/wUA/wAA/wAF/wAK/wAP/wAU/wAZ/wAe/wAj/wAo/wAt/wAy/wA3/wA8/wBB/wBG/wBL/wBQ/wBV/wBa/wBf/wBk/wBp/wBu/wBz/wB4/wB9/wCC/wCH/wCM/wCR/wCW/wCb/wCg/wCl/wCq/wCv/wC0/wC5/wC+/wDD/wDI/wDN/wDS/wDX/wDc/wDh/wDm/wDr/wDw/wD1/wD7/wD//wD/+gD/9QD/8AD/6wD/5gD/4QD/3AD/1wD/0gD/zQD/yAD/wwD/vgD/uQD/tAD/rwD/qgD/pQD/oAD/mwD/lgD/kQD/jAD/hwD/ggD/fQD/eAD/cwD/bgD/aQD/ZAD/XwD/WgD/VQD/UAD/SwD/RgD/QQD/PAD/NwD/MgD/LQD/KAD/IwD/HgD/GQD/FAD/DwD/CgD/BQD/AAX/AAr/AA//ABT/ABn/AB7/ACP/ACj/AC3/ADL/ADf/ADz/AEH/AEb/AEv/AFD/AFX/AFr/AF//AGT/AGn/AG7/AHP/AHj/AH3/AIL/AIf/AIz/AJH/AJb/AJv/AKD/AKX/AKr/AK//ALT/ALn/AL7/AMP/AMj/AM3/ANL/ANf/ANz/AOH/AOb/AOv/APD/APX/APr/AP//AP/6AP/1AP/wAP/rAP/mAP/hAP/cAP/XAP/SAP/NAP/IAP/DAP++AP+5AP+0AP+vAP+qAP+lAP+gAP+bAP+WAP+RAP+MAP+HAP+CAP99AP94AP9zAP9uAP9pAP9kAP9fAP9aAP9VAP9QAP9LAP9GAP9BAP88AP83AP8yAP8tAP8oAP8jAP8eAP8ZAP8UAP8PAP8KAP8FAP8AACwAAAAAAQABAAAIBABnBAQAOw==" width=1 height=10></td></tr><tr><td class="td-linebottomrt"><a href="#Line45">45</a></td><td class="td-linebottomrt"><pre>insulin_to_infuse = y_kminus1....</pre></td><td class="td-linebottomrt">11232000</td><td class="td-linebottomrt">0.834 s</td><td class="td-linebottomrt" class="td-linebottomrt">1.1%</td><td class="td-linebottomrt"><img src="data:image/gif;base64, R0lGODlhAQABAPcAAP8A//oA//UA//AA/+sA/+YA/+EA/9wA/9cA/9IA/80A/8gA/8MA/74A/7kA/7QA/68A/6oA/6UA/6AA/5sA/5YA/5EA/4wA/4cA/4IA/30A/3gA/3MA/24A/2kA/2QA/18A/1oA/1UA/1AA/0sA/0YA/0EA/zwA/zcA/zIA/y0A/ygA/yMA/x4A/xkA/xQA/w8A/woA/wUA/wAA/wAF/wAK/wAP/wAU/wAZ/wAe/wAj/wAo/wAt/wAy/wA3/wA8/wBB/wBG/wBL/wBQ/wBV/wBa/wBf/wBk/wBp/wBu/wBz/wB4/wB9/wCC/wCH/wCM/wCR/wCW/wCb/wCg/wCl/wCq/wCv/wC0/wC5/wC+/wDD/wDI/wDN/wDS/wDX/wDc/wDh/wDm/wDr/wDw/wD1/wD7/wD//wD/+gD/9QD/8AD/6wD/5gD/4QD/3AD/1wD/0gD/zQD/yAD/wwD/vgD/uQD/tAD/rwD/qgD/pQD/oAD/mwD/lgD/kQD/jAD/hwD/ggD/fQD/eAD/cwD/bgD/aQD/ZAD/XwD/WgD/VQD/UAD/SwD/RgD/QQD/PAD/NwD/MgD/LQD/KAD/IwD/HgD/GQD/FAD/DwD/CgD/BQD/AAX/AAr/AA//ABT/ABn/AB7/ACP/ACj/AC3/ADL/ADf/ADz/AEH/AEb/AEv/AFD/AFX/AFr/AF//AGT/AGn/AG7/AHP/AHj/AH3/AIL/AIf/AIz/AJH/AJb/AJv/AKD/AKX/AKr/AK//ALT/ALn/AL7/AMP/AMj/AM3/ANL/ANf/ANz/AOH/AOb/AOv/APD/APX/APr/AP//AP/6AP/1AP/wAP/rAP/mAP/hAP/cAP/XAP/SAP/NAP/IAP/DAP++AP+5AP+0AP+vAP+qAP+lAP+gAP+bAP+WAP+RAP+MAP+HAP+CAP99AP94AP9zAP9uAP9pAP9kAP9fAP9aAP9VAP9QAP9LAP9GAP9BAP88AP83AP8yAP8tAP8oAP8jAP8eAP8ZAP8UAP8PAP8KAP8FAP8AACwAAAAAAQABAAAIBABnBAQAOw==" width=1 height=10></td></tr><tr><td class="td-linebottomrt">All other lines</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">&nbsp;</td><td class="td-linebottomrt">13.625 s</td><td class="td-linebottomrt">17.3%</td><td class="td-linebottomrt"><img src="data:image/gif;base64, R0lGODlhAQABAPcAAP8A//oA//UA//AA/+sA/+YA/+EA/9wA/9cA/9IA/80A/8gA/8MA/74A/7kA/7QA/68A/6oA/6UA/6AA/5sA/5YA/5EA/4wA/4cA/4IA/30A/3gA/3MA/24A/2kA/2QA/18A/1oA/1UA/1AA/0sA/0YA/0EA/zwA/zcA/zIA/y0A/ygA/yMA/x4A/xkA/xQA/w8A/woA/wUA/wAA/wAF/wAK/wAP/wAU/wAZ/wAe/wAj/wAo/wAt/wAy/wA3/wA8/wBB/wBG/wBL/wBQ/wBV/wBa/wBf/wBk/wBp/wBu/wBz/wB4/wB9/wCC/wCH/wCM/wCR/wCW/wCb/wCg/wCl/wCq/wCv/wC0/wC5/wC+/wDD/wDI/wDN/wDS/wDX/wDc/wDh/wDm/wDr/wDw/wD1/wD7/wD//wD/+gD/9QD/8AD/6wD/5gD/4QD/3AD/1wD/0gD/zQD/yAD/wwD/vgD/uQD/tAD/rwD/qgD/pQD/oAD/mwD/lgD/kQD/jAD/hwD/ggD/fQD/eAD/cwD/bgD/aQD/ZAD/XwD/WgD/VQD/UAD/SwD/RgD/QQD/PAD/NwD/MgD/LQD/KAD/IwD/HgD/GQD/FAD/DwD/CgD/BQD/AAX/AAr/AA//ABT/ABn/AB7/ACP/ACj/AC3/ADL/ADf/ADz/AEH/AEb/AEv/AFD/AFX/AFr/AF//AGT/AGn/AG7/AHP/AHj/AH3/AIL/AIf/AIz/AJH/AJb/AJv/AKD/AKX/AKr/AK//ALT/ALn/AL7/AMP/AMj/AM3/ANL/ANf/ANz/AOH/AOb/AOv/APD/APX/APr/AP//AP/6AP/1AP/wAP/rAP/mAP/hAP/cAP/XAP/SAP/NAP/IAP/DAP++AP+5AP+0AP+vAP+qAP+lAP+gAP+bAP+WAP+RAP+MAP+HAP+CAP99AP94AP9zAP9uAP9pAP9kAP9fAP9aAP9VAP9QAP9LAP9GAP9BAP88AP83AP8yAP8tAP8oAP8jAP8eAP8ZAP8UAP8PAP8KAP8FAP8AACwAAAAAAQABAAAIBABnBAQAOw==" width=17 height=10></td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Totals</td><td class="td-linebottomrt" style="background-color:#F0F0F0">&nbsp;</td><td class="td-linebottomrt" style="background-color:#F0F0F0">&nbsp;</td><td class="td-linebottomrt" style="background-color:#F0F0F0">78.902 s</td><td class="td-linebottomrt" style="background-color:#F0F0F0">100%</td><td class="td-linebottomrt" style="background-color:#F0F0F0">&nbsp;</td></tr></table><div class="grayline"/><b>Children</b> (called functions)<br/>No children<div class="grayline"/><strong>Code Analyzer results</strong><br/>No Code Analyzer messages.<div class="grayline"/><strong>Coverage results</strong><br/>Show coverage for parent directory<br/><table border=0 cellspacing=0 cellpadding=6><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Total lines in function</td><td class="td-linebottomrt">63</td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Non-code lines (comments, blank lines)</td><td class="td-linebottomrt">15</td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Code lines (lines that can run)</td><td class="td-linebottomrt">48</td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Code lines that did run</td><td class="td-linebottomrt">44</td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Code lines that did not run</td><td class="td-linebottomrt">4</td></tr><tr><td class="td-linebottomrt" style="background-color:#F0F0F0">Coverage (did run/can run)</td><td class="td-linebottomrt">91.67 %</td></tr></table><div class="grayline"/><b>Function listing</b><br/><table id="FunctionListingTable"><tr style="height:20px;"><th><pre><span style="color:#FF0000;">time</span> </pre></th><th><pre><span style="color:#0000FF;">Calls</span> </pre></th><th class="leftAligned" COLSPAN=2><pre><span> line</span></pre></th></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  31</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">        function [y_k, v_k] = preprocess(x_k,y_kminus1,u_k,params,dt)</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  32</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">            % What are the true inputs?</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.313 </span></pre></td><td><pre><span style="color: #0000FF">11235900 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  33</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            if dt == 0 </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">   3900 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  34</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                y_k = y_kminus1; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.007 </span></pre></td><td><pre><span style="color: #0000FF">   3900 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  35</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                v_k.CHO_consumed_rate = 0; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.004 </span></pre></td><td><pre><span style="color: #0000FF">   3900 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  36</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                v_k.IIR_dt = 0; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.223 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  37</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            else   </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  38</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                % Insulin</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.910 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  39</span><a name="Line39"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                if y_kminus1.insulin_to_infuse &lt;= 0 </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.606 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  40</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    IIR_dt = u_k.IIR; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  41</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                else</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  42</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                    IIR_dt = y_kminus1.last_IIR;    % assuming I do not inject new insulin if I still have some to inject</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.189 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  43</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  44</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.834 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  45</span><a name="Line45"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                insulin_to_infuse = y_kminus1.insulin_to_infuse + u_k.IIR;  % [U] as it is multiplied by 1 min </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  46</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">               </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  47</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                % Check if we have enough insulin to infuse for this time step.</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.188 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  48</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                if insulin_to_infuse &lt; IIR_dt * dt </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  49</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                    % If there isn't enough insulin to infuse, just infuse whatever is left.</span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  50</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                    IIR_dt = insulin_to_infuse / dt;</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.153 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  51</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  52</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.149 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  53</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                new_insulin_to_infuse = max(0, insulin_to_infuse - IIR_dt * dt); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.147 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  54</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                epsilon = 1e-5; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.153 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  55</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                if new_insulin_to_infuse &lt;= epsilon </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.147 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  56</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    new_insulin_to_infuse = 0; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.156 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  57</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  58</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  59</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                % CHO</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  1.106 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  60</span><a name="Line60"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                if (y_kminus1.CHO_to_eat / dt &gt;= params.eat_rate) || (u_k.CHO / dt &gt;= params.eat_rate &amp;&amp; y_kminus1.CHO_to_eat == 0) </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.007 </span></pre></td><td><pre><span style="color: #0000FF"> 300300 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  61</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    CHO_consumed_rate = params.eat_rate; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.473 </span></pre></td><td><pre><span style="color: #0000FF">10931700 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  62</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                elseif (u_k.CHO &gt; 0) &amp;&amp; (u_k.CHO / dt &lt; params.eat_rate) &amp;&amp; (y_kminus1.CHO_to_eat == 0) </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  63</span> </pre></td><td class="leftAligned"><pre><span style="color: #A0A0A0; background: #FFFFFF; padding:1px;">                    CHO_consumed_rate = u_k.CHO / dt;</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.132 </span></pre></td><td><pre><span style="color: #0000FF">10931700 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  64</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                else </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.517 </span></pre></td><td><pre><span style="color: #0000FF">10931700 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  65</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    CHO_consumed_rate = y_kminus1.CHO_to_eat / dt; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.156 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  66</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  67</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  68</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">                % Update extra states</span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.775 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  69</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                new_CHO_to_eat = u_k.CHO + y_kminus1.CHO_to_eat - CHO_consumed_rate * dt; </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  70</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.590 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  71</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                if y_kminus1.is_eating </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.016 </span></pre></td><td><pre><span style="color: #0000FF"> 335400 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  72</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    new_D = CHO_consumed_rate * dt + y_kminus1.D; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.165 </span></pre></td><td><pre><span style="color: #0000FF">10896600 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  73</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                elseif CHO_consumed_rate &gt; 0 </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">  35100 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  74</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    new_D = CHO_consumed_rate * dt; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.147 </span></pre></td><td><pre><span style="color: #0000FF">10861500 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  75</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                else </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.491 </span></pre></td><td><pre><span style="color: #0000FF">10861500 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  76</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    new_D = y_kminus1.D; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.236 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  77</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  78</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.155 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  79</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                if CHO_consumed_rate &gt; 0 &amp;&amp; y_kminus1.is_eating == false     % starts eating -&gt; store last state of Qsto </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">  35100 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  80</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    is_eating = true; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.006 </span></pre></td><td><pre><span style="color: #0000FF">  35100 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  81</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    lastQsto = x_k.Qsto1 + x_k.Qsto2; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.549 </span></pre></td><td><pre><span style="color: #0000FF">11196900 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  82</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                elseif CHO_consumed_rate == 0 &amp;&amp; y_kminus1.is_eating == true     % stops eating -&gt; restart updating lastQsto </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">&lt; 0.001 </span></pre></td><td><pre><span style="color: #0000FF">  35100 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  83</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    is_eating = false; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.002 </span></pre></td><td><pre><span style="color: #0000FF">  35100 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  84</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    lastQsto = y_kminus1.lastQsto; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.135 </span></pre></td><td><pre><span style="color: #0000FF">11161800 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  85</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                else </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.512 </span></pre></td><td><pre><span style="color: #0000FF">11161800 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  86</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    is_eating = y_kminus1.is_eating; </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.505 </span></pre></td><td><pre><span style="color: #0000FF">11161800 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  87</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                    lastQsto = y_kminus1.lastQsto;     </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.189 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  88</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">                end </span><br/></pre></td></tr><tr><td><pre></pre></td><td><pre></pre></td><td><pre><span style="color: #A0A0A0; margin:0;">  89</span> </pre></td><td class="leftAligned"><pre><span style="color: #228B22; background: #FFFFFF; padding:1px;">    </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000"> 29.330 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  90</span><a name="Line90"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FF8E8E; padding:1px;">                v_k = struct('CHO_consumed_rate',CHO_consumed_rate,'IIR_dt',IIR_dt); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000"> 33.097 </span></pre></td><td><pre><span style="color: #0000FF">11232000 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  91</span><a name="Line91"></a></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FF8080; padding:1px;">                y_k = struct('insulin_to_infuse',new_insulin_to_infuse,'last_IIR',IIR_dt,'CHO_to_eat',new_CHO_to_eat,'D',new_D,'lastQsto',lastQsto,'is_eating',is_eating); </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.133 </span></pre></td><td><pre><span style="color: #0000FF">11235900 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  92</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">            end </span><br/></pre></td></tr><tr><td><pre><span style="color: #FF0000">  0.628 </span></pre></td><td><pre><span style="color: #0000FF">11235900 </span></pre></td><td><pre><span style="color: #000000; font-weight: bold; margin:0; ">  93</span></pre></td><td class="leftAligned"><pre><span style="color: #000000; background: #FFFFFF; padding:1px;">        end </span><br/></pre></td></tr></table><p><p>Other subfunctions in this file are not included in this listing.</body></html>